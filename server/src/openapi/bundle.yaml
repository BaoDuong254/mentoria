openapi: 3.0.0
info:
  title: Mentoria API
  description: This is the API documentation for the Mentoria platform - a mentorship platform connecting mentors and mentees.
  termsOfService: "http://localhost:5173/terms/"
  contact:
    email: duonggiabao254@gmail.com
  license:
    name: MIT
    url: "https://opensource.org/licenses/MIT"
  version: 1.0.0
servers:
  - url: "http://localhost:3000"
    description: Development server
  - url: "https://api.mentoria.com"
    description: Production server
tags:
  - name: authentication
    description: User authentication and account management
  - name: oauth
    description: OAuth integration with third-party providers
  - name: mentor
    description: Mentor profile and mentorship services
  - name: mentee
    description: Mentee profile and mentorship management
  - name: user
    description: User profile and settings management
  - name: search
    description: Search functionality for mentors and content
paths:
  /api/auth/register:
    post:
      tags:
        - authentication
      summary: Register a new user
      description: "Register a new user account. After registration, an OTP will be sent to the provided email for verification."
      operationId: registerUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterRequest"
      responses:
        "201":
          description: User registered successfully. OTP sent to email.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          description: Validation errors or email already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/mentor-register:
    post:
      tags:
        - authentication
      summary: Register a new mentor
      description: "Register a new mentor account with CV upload. After registration, an OTP will be sent to the provided email for verification. The account will be reviewed by the admin team before approval."
      operationId: registerMentor
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - firstName
                - lastName
                - email
                - password
                - cv
              properties:
                firstName:
                  type: string
                  description: Mentor's first name
                  example: John
                lastName:
                  type: string
                  description: Mentor's last name
                  example: Doe
                email:
                  type: string
                  format: email
                  description: Mentor's email address (must be unique)
                  example: john.doe@example.com
                password:
                  type: string
                  format: password
                  minLength: 8
                  maxLength: 20
                  description: Password (8-20 characters)
                  example: SecurePass123
                cv:
                  type: string
                  format: binary
                  description: Mentor's CV in PDF format
      responses:
        "201":
          description: Mentor registered successfully. OTP sent to email and account pending review.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentor registered successfully. Please verify your email. Your account will be reviewed by our team.
        "400":
          description: "Validation errors, email already exists, CV missing, or invalid file format"
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/ValidationErrorResponse"
                  - $ref: "#/components/schemas/ErrorResponse"
              examples:
                validationError:
                  value:
                    success: false
                    message: Validation errors
                    data:
                      errors:
                        - "Email is invalid: email"
                      oldData:
                        firstName: John
                        lastName: Doe
                        email: invalid-email
                        password: password123
                missingCV:
                  value:
                    success: false
                    message: CV file is required
                invalidFileType:
                  value:
                    success: false
                    message: Only PDF files are allowed for CV
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/verify-otp:
    post:
      tags:
        - authentication
      summary: Verify OTP
      description: "Verify the OTP sent to user's email after registration. Upon successful verification, user will be logged in automatically."
      operationId: verifyOTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OTPRequest"
      responses:
        "200":
          description: OTP verified successfully. User is now logged in.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
          headers:
            Set-Cookie:
              description: JWT token set as HTTP-only cookie
              schema:
                type: string
        "400":
          description: Invalid or expired OTP
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/resend-otp:
    post:
      tags:
        - authentication
      summary: Resend OTP
      description: Request a new OTP to be sent to the user's email address. This is useful when the previous OTP has expired or was not received.
      operationId: resendOTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResendOTPRequest"
      responses:
        "200":
          description: New OTP sent successfully to the email address
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: A new OTP has been sent to your email
        "400":
          description: Email not found or email already verified
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                emailNotFound:
                  value:
                    success: false
                    message: Email not found
                alreadyVerified:
                  value:
                    success: false
                    message: Email is already verified
                missingEmail:
                  value:
                    success: false
                    message: Email is required
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/login:
    post:
      tags:
        - authentication
      summary: User login
      description: Authenticate user with email and password. Returns JWT token as HTTP-only cookie.
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
          headers:
            Set-Cookie:
              description: JWT token set as HTTP-only cookie
              schema:
                type: string
        "400":
          description: Invalid credentials or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/logout:
    post:
      tags:
        - authentication
      summary: User logout
      description: Logout user and clear authentication cookie
      operationId: logoutUser
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/forgot-password:
    post:
      tags:
        - authentication
      summary: Request password reset
      description: Send password reset email to user's registered email address
      operationId: forgotPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ForgotPasswordRequest"
      responses:
        "200":
          description: Reset password email sent successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "404":
          description: Email not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/api/auth/reset-password/{token}":
    post:
      tags:
        - authentication
      summary: Reset password
      description: Reset password using the token received in email
      operationId: resetPassword
      parameters:
        - name: token
          in: path
          required: true
          description: Password reset token from email
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResetPasswordRequest"
      responses:
        "200":
          description: Password reset successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          description: Invalid token or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/me:
    get:
      tags:
        - authentication
      summary: Get current user info
      description: Get information about the currently authenticated user
      operationId: getMe
      security:
        - cookieAuth: []
      responses:
        "200":
          description: User information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User info retrieved successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/User"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/google:
    get:
      tags:
        - oauth
      summary: Initiate Google OAuth
      description: Redirect to Google OAuth consent screen
      operationId: googleAuth
      responses:
        "302":
          description: Redirect to Google OAuth
        "500":
          description: OAuth configuration error
  /api/auth/google/callback:
    get:
      tags:
        - oauth
      summary: Google OAuth callback
      description: Handle Google OAuth callback and authenticate user
      operationId: googleCallback
      parameters:
        - name: code
          in: query
          description: Authorization code from Google
          schema:
            type: string
        - name: state
          in: query
          description: State parameter for CSRF protection
          schema:
            type: string
      responses:
        "302":
          description: Redirect to client with authentication status
          headers:
            Set-Cookie:
              description: JWT token set as HTTP-only cookie (on success)
              schema:
                type: string
        "400":
          description: OAuth authentication failed
  /api/mentors:
    get:
      tags:
        - mentor
      summary: Get list of mentors
      description: Retrieve a paginated list of active mentor profiles.
      operationId: getMentorsList
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: "Number of items per page (default 10, max 100)"
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Mentors list retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentors retrieved successfully
                  data:
                    $ref: "#/components/schemas/MentorsListResponse"
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Invalid page number. Must be a positive integer.
                invalidLimit:
                  value:
                    success: false
                    message: Invalid limit. Must be between 1 and 100.
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/api/mentors/{mentorId}/stats":
    get:
      tags:
        - mentor
      summary: Get mentor statistics
      description: "Retrieve comprehensive statistics for a specific mentor including total unique mentees, total feedbacks, total stars, and average rating."
      operationId: getMentorStats
      parameters:
        - name: mentorId
          in: path
          required: true
          description: Unique identifier of the mentor
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Mentor statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentor stats retrieved successfully
                  data:
                    $ref: "#/components/schemas/MentorStatsResponse"
              example:
                success: true
                message: Mentor stats retrieved successfully
                data:
                  total_mentees: 25
                  total_feedbacks: 15
                  total_stars: 72
                  average_rating: 4.8
        "400":
          description: Invalid mentor ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Invalid mentor ID
        "404":
          description: Mentor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Mentor not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  "/api/mentors/{mentorId}":
    get:
      tags:
        - mentor
      summary: Get mentor profile
      description: "Retrieve comprehensive profile information for a specific mentor including personal details, expertise, companies, languages, plans, and reviews."
      operationId: getMentorProfile
      parameters:
        - name: mentorId
          in: path
          required: true
          description: Unique identifier of the mentor
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Mentor profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentor profile retrieved successfully
                  data:
                    $ref: "#/components/schemas/MentorProfileResponse"
        "400":
          description: Invalid mentor ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Invalid mentor ID
        "404":
          description: Mentor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Mentor not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags:
        - mentor
      summary: Update mentor profile
      description: "Update mentor profile information including personal details, bio, expertise, languages, and social links. Only the authenticated mentor can update their own profile."
      operationId: updateMentorProfile
      security:
        - cookieAuth: []
      parameters:
        - name: mentorId
          in: path
          required: true
          description: Unique identifier of the mentor
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMentorProfileRequest"
      responses:
        "200":
          description: Mentor profile updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: Mentor profile updated successfully
        "400":
          description: Invalid mentor ID or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalidId:
                  value:
                    success: false
                    message: Invalid mentor ID
                invalidSex:
                  value:
                    success: false
                    message: Invalid sex value. Must be 'Male' or 'Female'
                invalidResponseTime:
                  value:
                    success: false
                    message: Response time must be a string
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - user not authorized to update this profile
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: You are not authorized to update this profile
        "404":
          description: Mentor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Mentor not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/mentees:
    get:
      tags:
        - mentee
      summary: Get list of mentees
      description: Retrieve a paginated list of mentees
      parameters:
        - name: page
          in: query
          description: Page number for pagination
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentees retrieved successfully
                  data:
                    type: object
                    properties:
                      mentees:
                        type: array
                        items:
                          $ref: "#/components/schemas/MenteeListItem"
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          totalPages:
                            type: integer
                            example: 5
                          totalItems:
                            type: integer
                            example: 50
                          itemsPerPage:
                            type: integer
                            example: 10
                          hasNextPage:
                            type: boolean
                            example: true
                          hasPreviousPage:
                            type: boolean
                            example: false
        "400":
          description: Invalid parameters
        "500":
          description: Internal server error
  "/api/mentees/{menteeId}":
    get:
      tags:
        - mentee
      summary: Get mentee profile
      description: Retrieve detailed profile information for a specific mentee.
      parameters:
        - name: menteeId
          in: path
          required: true
          description: ID of the mentee to get
          schema:
            type: string
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentee profile retrieved successfully
                  data:
                    $ref: "#/components/schemas/MenteeProfile"
        "400":
          description: Invalid ID supplied
        "404":
          description: Mentee not found
        "500":
          description: Internal server error
    put:
      tags:
        - mentee
      summary: Update mentee profile
      description: Update profile information for a specific mentee. Only the mentee can update their own profile.
      security:
        - cookieAuth: []
      parameters:
        - name: menteeId
          in: path
          required: true
          description: ID of the mentee to update
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMenteeProfileRequest"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentee profile updated successfully
        "400":
          description: Invalid input
        "401":
          description: Unauthorized
        "403":
          description: Forbidden - can only update own profile
        "404":
          description: Mentee not found
        "500":
          description: Internal server error
  /api/users/avatar:
    put:
      tags:
        - user
      summary: Update user avatar
      description: |
        Upload a new avatar image for the authenticated user.

        **Workflow:**
        1. Frontend: User selects image and previews it locally (no server call)
        2. Frontend: User clicks "Save" to confirm
        3. Backend: Validates file, uploads to Cloudinary with optimizations, saves URL to database
        4. Backend: Automatically deletes old avatar from Cloudinary

        **Image Processing:**
        - Resized to 400x400 pixels
        - Face detection and centering applied
        - Automatic quality and format optimization (WebP for modern browsers)
        - Stored in Cloudinary with secure URL
      operationId: updateUserAvatar
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - avatar
              properties:
                avatar:
                  type: string
                  format: binary
                  description: "Avatar image file (JPEG, PNG, GIF, or WebP). Maximum size 2MB."
      responses:
        "200":
          description: Avatar updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Avatar updated successfully
                  data:
                    type: object
                    properties:
                      avatar_url:
                        type: string
                        format: uri
                        example: "https://res.cloudinary.com/demo/image/upload/v1234567890/user_avatars/avatar_123_1234567890.jpg"
                        description: Cloudinary URL of the uploaded avatar image
        "400":
          description: Bad request - Avatar file is required or invalid file type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                noFile:
                  value:
                    success: false
                    message: Avatar image is required
                invalidType:
                  value:
                    success: false
                    message: "Only image files (JPEG, PNG, GIF, WebP) are allowed"
                sizeTooLarge:
                  value:
                    success: false
                    message: File size exceeds 2MB limit
        "401":
          description: Unauthorized - User not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Unauthorized - User not authenticated
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Internal server error
  /api/users/change-password:
    put:
      tags:
        - user
      summary: Change user password
      description: |
        Change the password for the authenticated user.

        **Requirements:**
        - User must be authenticated with a valid JWT token
        - User must be using local authentication (not Google OAuth)
        - Old password must be correct
        - New password must be different from old password
        - New password must match confirm password
        - Password must be 8-20 characters long

        **Workflow:**
        1. User provides current password for verification
        2. User provides new password and confirmation
        3. Backend validates old password against database
        4. Backend hashes new password and updates database
        5. User can immediately login with new password
      operationId: changeUserPassword
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangePasswordRequest"
      responses:
        "200":
          description: Password changed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: Password changed successfully
        "400":
          description: Bad request - Validation errors or incorrect old password
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/ErrorResponse"
                  - $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                incorrectOldPassword:
                  value:
                    success: false
                    message: Current password is incorrect
                googleUser:
                  value:
                    success: false
                    message: Cannot change password for Google authenticated users
                validationErrors:
                  value:
                    success: false
                    message: Validation errors
                    data:
                      errors:
                        - "New password and confirm password do not match: confirmPassword"
                        - "New password must be different from old password: newPassword"
                passwordTooShort:
                  value:
                    success: false
                    message: Validation errors
                    data:
                      errors:
                        - "Password must be at least 8 characters long: newPassword"
        "401":
          description: Unauthorized - User not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Unauthorized - User not authenticated
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Internal server error
  /api/search/mentors:
    get:
      tags:
        - search
      summary: Search mentors
      description: "Search for mentors by keyword across multiple fields including name, bio, headline, skills, categories, companies, job titles, and languages. Returns a paginated list of matching mentors."
      operationId: searchMentors
      parameters:
        - name: keyword
          in: query
          required: true
          description: Search keyword to match against mentor profiles
          schema:
            type: string
            minLength: 1
            example: javascript
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: "Number of items per page (default 10, max 100)"
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Search completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 15 mentors matching "javascript"
                  data:
                    $ref: "#/components/schemas/SearchMentorsResponse"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                missingKeyword:
                  value:
                    success: false
                    message: Keyword cannot be empty
                    errors:
                      - message: Keyword cannot be empty
                        path:
                          - keyword
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
components:
  schemas:
    RegisterRequest:
      type: object
      required:
        - firstName
        - lastName
        - email
        - password
      properties:
        firstName:
          type: string
          minLength: 1
          example: John
          description: User's first name
        lastName:
          type: string
          minLength: 1
          example: Doe
          description: User's last name
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's email address (must be unique)
        password:
          type: string
          minLength: 8
          maxLength: 20
          example: securepassword123
          description: User's password (8-20 characters)
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's email address
        password:
          type: string
          example: securepassword123
          description: User's password
    OTPRequest:
      type: object
      required:
        - otp
      properties:
        otp:
          type: string
          example: "123456"
          description: 6-digit OTP code sent to user's email
    ResendOTPRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's registered email address to resend OTP
    ForgotPasswordRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's registered email address
    ResetPasswordRequest:
      type: object
      required:
        - newPassword
      properties:
        newPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: newsecurepassword123
          description: New password (8-20 characters)
    ChangePasswordRequest:
      type: object
      required:
        - oldPassword
        - newPassword
        - confirmPassword
      properties:
        oldPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: currentpassword123
          description: User's current password
        newPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: newsecurepassword123
          description: "New password (8-20 characters, must be different from old password)"
        confirmPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: newsecurepassword123
          description: Confirmation of new password (must match newPassword)
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Operation completed successfully
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Error occurred
    ValidationErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Validation errors
        data:
          type: object
          properties:
            errors:
              type: array
              items:
                type: string
              example:
                - "Email is invalid: email"
                - "Password must be at least 8 characters long: password"
            oldData:
              type: object
              description: Previously submitted data (excluding sensitive fields like password)
              example:
                firstName: John
                lastName: Doe
                email: invalid-email
                password: ""
    User:
      type: object
      properties:
        user_id:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174000
          description: Unique user identifier
        firstName:
          type: string
          example: John
          description: User's first name
        lastName:
          type: string
          example: Doe
          description: User's last name
        sex:
          type: string
          enum:
            - Male
            - Female
          example: Male
          description: User's gender
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's email address
        avatar_url:
          type: string
          format: uri
          example: "https://example.com/avatars/johndoe.jpg"
          description: URL to user's avatar image
        country:
          type: string
          example: USA
          description: User's country of residence
        role:
          type: string
          enum:
            - Mentee
            - Mentor
            - Admin
          example: Mentee
          description: User's role in the platform
        timezone:
          type: string
          example: America/New_York
          description: User's timezone
        status:
          type: string
          enum:
            - Active
            - Inactive
            - Banned
            - Pending
          example: Active
          description: User's account status
        google_id:
          type: string
          nullable: true
          example: google-oauth2|123456789012345678901
          description: Google OAuth2 ID if registered via Google
        provider:
          type: string
          enum:
            - Local
            - Google
          example: Local
          description: Authentication provider used
        created_at:
          type: string
          format: date-time
          example: "2023-10-25T10:30:00Z"
          description: Account creation timestamp
        updated_at:
          type: string
          format: date-time
          example: "2023-10-25T10:30:00Z"
          description: Last account update timestamp
    MentorProfileResponse:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
          description: Unique mentor identifier
        first_name:
          type: string
          example: John
          description: Mentor's first name
        last_name:
          type: string
          example: Doe
          description: Mentor's last name
        email:
          type: string
          format: email
          example: john.mentor@example.com
          description: Mentor's email address
        sex:
          type: string
          nullable: true
          enum:
            - Male
            - Female
          example: Male
          description: Mentor's gender
        avatar_url:
          type: string
          nullable: true
          format: uri
          example: "https://example.com/avatars/mentor-john.jpg"
          description: URL to mentor's avatar image
        country:
          type: string
          nullable: true
          example: USA
          description: Mentor's country of residence
        timezone:
          type: string
          nullable: true
          example: America/New_York
          description: Mentor's timezone
        bio:
          type: string
          nullable: true
          example: Experienced software engineer with 10+ years in web development
          description: Mentor's biography
        headline:
          type: string
          nullable: true
          example: Senior Software Engineer at Tech Corp
          description: Mentor's professional headline
        response_time:
          type: string
          example: Within 24 hours
          description: Average response time description
        cv_url:
          type: string
          nullable: true
          format: uri
          example: "https://cloudinary.com/cvs/mentor-john-cv.pdf"
          description: URL to mentor's CV (PDF)
        social_links:
          type: array
          items:
            $ref: "#/components/schemas/SocialLink"
          description: Mentor's social media links
        companies:
          type: array
          items:
            $ref: "#/components/schemas/Company"
          description: Companies where mentor has worked
        skills:
          type: array
          items:
            $ref: "#/components/schemas/Skill"
          description: Skills and areas of expertise
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
            - French
          description: Languages spoken by mentor
        plans:
          type: array
          items:
            $ref: "#/components/schemas/Plan"
          description: Mentorship plans offered by mentor
        total_mentees:
          type: integer
          example: 25
          description: Total number of unique mentees guided
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received
        total_stars:
          type: integer
          example: 72
          description: Total cumulative star rating from all feedbacks
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from feedbacks (total_stars / total_feedbacks)
    MentorStatsResponse:
      type: object
      properties:
        total_mentees:
          type: integer
          example: 25
          description: Total number of unique mentees guided by the mentor
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received by the mentor
        total_stars:
          type: integer
          example: 72
          description: Total cumulative star rating from all feedbacks
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from feedbacks (total_stars / total_feedbacks)
    SocialLink:
      type: object
      properties:
        link:
          type: string
          format: uri
          example: "https://linkedin.com/in/johndoe"
          description: URL to social media profile
        platform:
          type: string
          example: LinkedIn
          description: Social media platform name
    Company:
      type: object
      properties:
        company_id:
          type: integer
          example: 1
          description: Unique company identifier
        company_name:
          type: string
          example: Tech Corp
          description: Company name
        job_title_id:
          type: integer
          example: 3
          description: Unique job title identifier
        job_name:
          type: string
          example: Senior Software Engineer
          description: Mentor's job title at the company
    Skill:
      type: object
      properties:
        skill_id:
          type: integer
          example: 1
          description: Unique skill identifier
        skill_name:
          type: string
          example: JavaScript
          description: Skill or area of expertise
    Plan:
      type: object
      properties:
        plan_id:
          type: integer
          example: 1
          description: Unique plan identifier
        plan_description:
          type: string
          example: 1-hour mentorship session with personalized career guidance
          description: Description of the mentorship plan
        plan_charge:
          type: number
          format: decimal
          example: 99.99
          description: Cost of the plan
        plan_type:
          type: string
          example: Session
          description: Type of plan (Session or Mentorship)
        sessions_duration:
          type: integer
          nullable: true
          example: 60
          description: Duration of session in minutes (only for Session type plans)
        benefits:
          type: array
          nullable: true
          items:
            type: string
          example:
            - 1-on-1 video call
            - Code review
            - Career guidance
          description: List of benefits included in the plan (only for Mentorship type plans)
    UpdateMentorProfileRequest:
      type: object
      properties:
        firstName:
          type: string
          minLength: 1
          example: John
          description: Mentor's first name
        lastName:
          type: string
          minLength: 1
          example: Doe
          description: Mentor's last name
        sex:
          type: string
          enum:
            - Male
            - Female
          example: Male
          description: Mentor's gender
        country:
          type: string
          example: USA
          description: Mentor's country of residence
        timezone:
          type: string
          example: America/New_York
          description: Mentor's timezone
        bio:
          type: string
          example: Experienced software engineer with 10+ years in web development
          description: Mentor's biography
        headline:
          type: string
          example: Senior Software Engineer at Tech Corp
          description: Mentor's professional headline
        responseTime:
          type: string
          example: Within 24 hours
          description: "Average response time description (e.g., 'Within 1 hour', '1-2 days')"
        cvUrl:
          type: string
          format: uri
          example: "https://cloudinary.com/cvs/mentor-john-cv.pdf"
          description: URL to mentor's CV (PDF)
        socialLinks:
          type: array
          items:
            type: object
            required:
              - link
              - platform
            properties:
              link:
                type: string
                format: uri
                example: "https://linkedin.com/in/johndoe"
              platform:
                type: string
                example: LinkedIn
          description: Mentor's social media links
        companies:
          type: array
          items:
            type: object
            required:
              - companyName
              - jobTitleName
            properties:
              companyName:
                type: string
                example: Tech Corp
              jobTitleName:
                type: string
                example: Senior Software Engineer
          example:
            - companyName: Tech Corp
              jobTitleName: Senior Software Engineer
            - companyName: Web Solutions
              jobTitleName: Frontend Developer
          description: Companies where mentor has worked or is working
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
            - French
          description: Languages spoken by mentor
        skillIds:
          type: array
          items:
            type: integer
          example:
            - 1
            - 2
            - 3
          description: Array of skill IDs representing areas of expertise
    MentorListItem:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        avatar_url:
          type: string
          nullable: true
          format: uri
          example: "https://example.com/avatars/mentor-john.jpg"
        country:
          type: string
          nullable: true
          example: USA
        bio:
          type: string
          nullable: true
          example: Experienced software engineer with 10+ years
        headline:
          type: string
          nullable: true
          example: Senior Software Engineer at Tech Corp
        response_time:
          type: string
          example: Within 24 hours
          description: Average response time description
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from all feedbacks
        lowest_plan_price:
          type: number
          nullable: true
          format: decimal
          example: 49.99
          description: Lowest price among all plans offered by the mentor
        skills:
          type: array
          items:
            $ref: "#/components/schemas/Skill"
          description: Mentor's skills and areas of expertise
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
          description: Languages spoken by the mentor
    MentorsListResponse:
      type: object
      properties:
        mentors:
          type: array
          items:
            $ref: "#/components/schemas/MentorListItem"
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
    PaginationInfo:
      type: object
      properties:
        currentPage:
          type: integer
          example: 1
        totalPages:
          type: integer
          example: 5
        totalItems:
          type: integer
          example: 47
        itemsPerPage:
          type: integer
          example: 10
        hasNextPage:
          type: boolean
          example: true
        hasPreviousPage:
          type: boolean
          example: false
    MenteeProfile:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        email:
          type: string
          format: email
          example: john.doe@example.com
        sex:
          type: string
          enum:
            - Male
            - Female
          nullable: true
        avatar_url:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
        timezone:
          type: string
          nullable: true
        goal:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
          nullable: true
        is_email_verified:
          type: boolean
          default: false
    UpdateMenteeProfileRequest:
      type: object
      properties:
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: Doe
        sex:
          type: string
          enum:
            - Male
            - Female
        country:
          type: string
        timezone:
          type: string
        goal:
          type: string
    MenteeListItem:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        avatar_url:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
        goal:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
    SearchMentorsResponse:
      type: object
      properties:
        mentors:
          type: array
          items:
            $ref: "#/components/schemas/SearchMentorListItem"
          description: Array of mentors matching the search criteria
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
          description: Pagination information for the search results
        searchInfo:
          type: object
          properties:
            keyword:
              type: string
              example: javascript
              description: The keyword used for searching
            searchedFields:
              type: array
              items:
                type: string
              example:
                - first_name
                - last_name
                - full_name
                - bio
                - headline
                - skills
                - categories
                - companies
                - job_titles
                - languages
              description: List of fields that were searched
          description: Information about the search query and scope
    SearchMentorListItem:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
          description: Unique mentor identifier
        first_name:
          type: string
          example: John
          description: Mentor's first name
        last_name:
          type: string
          example: Doe
          description: Mentor's last name
        avatar_url:
          type: string
          nullable: true
          format: uri
          example: "https://example.com/avatars/mentor-john.jpg"
          description: URL to mentor's avatar image
        country:
          type: string
          nullable: true
          example: USA
          description: Mentor's country of residence
        bio:
          type: string
          nullable: true
          example: Experienced JavaScript developer with 10+ years
          description: Mentor's biography
        headline:
          type: string
          nullable: true
          example: Senior JavaScript Engineer at Tech Corp
          description: Mentor's professional headline
        response_time:
          type: string
          example: Within 24 hours
          description: Average response time description
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from all feedbacks
        lowest_plan_price:
          type: number
          nullable: true
          format: decimal
          example: 49.99
          description: Lowest price among all plans offered by the mentor
        skills:
          type: array
          items:
            $ref: "#/components/schemas/Skill"
          description: Mentor's skills and areas of expertise
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
          description: Languages spoken by the mentor
        categories:
          type: array
          items:
            $ref: "#/components/schemas/Category"
          description: Categories associated with the mentor's skills
    Category:
      type: object
      properties:
        category_id:
          type: integer
          example: 1
          description: Unique category identifier
        category_name:
          type: string
          example: Web Development
          description: Category name
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: token
      description: JWT token obtained from login or OAuth. Token is automatically sent as HTTP-only cookie named 'token'.
