openapi: 3.0.0
info:
  title: Mentoria API
  description: This is the API documentation for the Mentoria platform - a mentorship platform connecting mentors and mentees.
  termsOfService: http://localhost:5173/terms/
  contact:
    email: duonggiabao254@gmail.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  version: 1.0.0
servers:
  - url: http://localhost:3000
    description: Development server
  - url: https://api.mentoria.com
    description: Production server
tags:
  - name: authentication
    description: User authentication and account management
  - name: oauth
    description: OAuth integration with third-party providers
  - name: mentor
    description: Mentor profile and mentorship services
  - name: mentee
    description: Mentee profile and mentorship management
  - name: user
    description: User profile and settings management
  - name: search
    description: Search functionality for mentors and content
  - name: catalog
    description: Category catalog and taxonomy management
  - name: slot
    description: Mentor availability slots management
  - name: payment
    description: Payment processing with Stripe integration
  - name: messages
    description: Real-time messaging between users with WebSocket integration
paths:
  /api/auth/register:
    post:
      tags:
        - authentication
      summary: Register a new user
      description: Register a new user account. After registration, an OTP will be sent to the provided email for verification.
      operationId: registerUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterRequest"
      responses:
        "201":
          description: User registered successfully. OTP sent to email.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          description: Validation errors or email already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/mentor-register:
    post:
      tags:
        - authentication
      summary: Register a new mentor
      description: Register a new mentor account with CV upload. After registration, an OTP will be sent to the provided email for verification. The account will be reviewed by the admin team before approval.
      operationId: registerMentor
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - firstName
                - lastName
                - email
                - password
                - cv
              properties:
                firstName:
                  type: string
                  description: Mentor's first name
                  example: John
                lastName:
                  type: string
                  description: Mentor's last name
                  example: Doe
                email:
                  type: string
                  format: email
                  description: Mentor's email address (must be unique)
                  example: john.doe@example.com
                password:
                  type: string
                  format: password
                  minLength: 8
                  maxLength: 20
                  description: Password (8-20 characters)
                  example: SecurePass123
                cv:
                  type: string
                  format: binary
                  description: Mentor's CV in PDF format
      responses:
        "201":
          description: Mentor registered successfully. OTP sent to email and account pending review.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentor registered successfully. Please verify your email. Your account will be reviewed by our team.
        "400":
          description: Validation errors, email already exists, CV missing, or invalid file format
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/ValidationErrorResponse"
                  - $ref: "#/components/schemas/ErrorResponse"
              examples:
                validationError:
                  value:
                    success: false
                    message: Validation errors
                    data:
                      errors:
                        - "Email is invalid: email"
                      oldData:
                        firstName: John
                        lastName: Doe
                        email: invalid-email
                        password: password123
                missingCV:
                  value:
                    success: false
                    message: CV file is required
                invalidFileType:
                  value:
                    success: false
                    message: Only PDF files are allowed for CV
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/verify-otp:
    post:
      tags:
        - authentication
      summary: Verify OTP
      description: Verify the OTP sent to user's email after registration. Upon successful verification, user will be logged in automatically.
      operationId: verifyOTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OTPRequest"
      responses:
        "200":
          description: OTP verified successfully. User is now logged in.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
          headers:
            Set-Cookie:
              description: JWT token set as HTTP-only cookie
              schema:
                type: string
        "400":
          description: Invalid or expired OTP
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/resend-otp:
    post:
      tags:
        - authentication
      summary: Resend OTP
      description: Request a new OTP to be sent to the user's email address. This is useful when the previous OTP has expired or was not received.
      operationId: resendOTP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResendOTPRequest"
      responses:
        "200":
          description: New OTP sent successfully to the email address
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: A new OTP has been sent to your email
        "400":
          description: Email not found or email already verified
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                emailNotFound:
                  value:
                    success: false
                    message: Email not found
                alreadyVerified:
                  value:
                    success: false
                    message: Email is already verified
                missingEmail:
                  value:
                    success: false
                    message: Email is required
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/login:
    post:
      tags:
        - authentication
      summary: User login
      description: Authenticate user with email and password. Returns JWT token as HTTP-only cookie.
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
          headers:
            Set-Cookie:
              description: JWT token set as HTTP-only cookie
              schema:
                type: string
        "400":
          description: Invalid credentials or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/logout:
    post:
      tags:
        - authentication
      summary: User logout
      description: Logout user and clear authentication cookie
      operationId: logoutUser
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/forgot-password:
    post:
      tags:
        - authentication
      summary: Request password reset
      description: Send password reset email to user's registered email address
      operationId: forgotPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ForgotPasswordRequest"
      responses:
        "200":
          description: Reset password email sent successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "404":
          description: Email not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/reset-password/{token}:
    post:
      tags:
        - authentication
      summary: Reset password
      description: Reset password using the token received in email
      operationId: resetPassword
      parameters:
        - name: token
          in: path
          required: true
          description: Password reset token from email
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResetPasswordRequest"
      responses:
        "200":
          description: Password reset successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          description: Invalid token or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/me:
    get:
      tags:
        - authentication
      summary: Get current user info
      description: Get information about the currently authenticated user
      operationId: getMe
      security:
        - cookieAuth: []
      responses:
        "200":
          description: User information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User info retrieved successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/User"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/auth/google:
    get:
      tags:
        - oauth
      summary: Initiate Google OAuth
      description: Redirect to Google OAuth consent screen
      operationId: googleAuth
      responses:
        "302":
          description: Redirect to Google OAuth
        "500":
          description: OAuth configuration error
  /api/auth/google/callback:
    get:
      tags:
        - oauth
      summary: Google OAuth callback
      description: Handle Google OAuth callback and authenticate user
      operationId: googleCallback
      parameters:
        - name: code
          in: query
          description: Authorization code from Google
          schema:
            type: string
        - name: state
          in: query
          description: State parameter for CSRF protection
          schema:
            type: string
      responses:
        "302":
          description: Redirect to client with authentication status
          headers:
            Set-Cookie:
              description: JWT token set as HTTP-only cookie (on success)
              schema:
                type: string
        "400":
          description: OAuth authentication failed
  /api/mentors:
    get:
      tags:
        - mentor
      summary: Get list of mentors
      description: Retrieve a paginated list of active mentor profiles.
      operationId: getMentorsList
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Mentors list retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentors retrieved successfully
                  data:
                    $ref: "#/components/schemas/MentorsListResponse"
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Invalid page number. Must be a positive integer.
                invalidLimit:
                  value:
                    success: false
                    message: Invalid limit. Must be between 1 and 100.
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/mentors/{mentorId}/stats:
    get:
      tags:
        - mentor
      summary: Get mentor statistics
      description: Retrieve comprehensive statistics for a specific mentor including total unique mentees, total feedbacks, total stars, and average rating.
      operationId: getMentorStats
      parameters:
        - name: mentorId
          in: path
          required: true
          description: Unique identifier of the mentor
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Mentor statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentor stats retrieved successfully
                  data:
                    $ref: "#/components/schemas/MentorStatsResponse"
              example:
                success: true
                message: Mentor stats retrieved successfully
                data:
                  total_mentees: 25
                  total_feedbacks: 15
                  total_stars: 72
                  average_rating: 4.8
        "400":
          description: Invalid mentor ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Invalid mentor ID
        "404":
          description: Mentor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Mentor not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/mentors/{mentorId}:
    get:
      tags:
        - mentor
      summary: Get mentor profile
      description: Retrieve comprehensive profile information for a specific mentor including personal details, expertise, companies, languages, plans, and reviews.
      operationId: getMentorProfile
      parameters:
        - name: mentorId
          in: path
          required: true
          description: Unique identifier of the mentor
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Mentor profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentor profile retrieved successfully
                  data:
                    $ref: "#/components/schemas/MentorProfileResponse"
        "400":
          description: Invalid mentor ID format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Invalid mentor ID
        "404":
          description: Mentor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Mentor not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags:
        - mentor
      summary: Update mentor profile
      description: Update mentor profile information including personal details, bio, expertise, languages, and social links. Only the authenticated mentor can update their own profile.
      operationId: updateMentorProfile
      security:
        - cookieAuth: []
      parameters:
        - name: mentorId
          in: path
          required: true
          description: Unique identifier of the mentor
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMentorProfileRequest"
      responses:
        "200":
          description: Mentor profile updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: Mentor profile updated successfully
        "400":
          description: Invalid mentor ID or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalidId:
                  value:
                    success: false
                    message: Invalid mentor ID
                invalidSex:
                  value:
                    success: false
                    message: Invalid sex value. Must be 'Male' or 'Female'
                invalidResponseTime:
                  value:
                    success: false
                    message: Response time must be a string
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - user not authorized to update this profile
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: You are not authorized to update this profile
        "404":
          description: Mentor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Mentor not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/mentees:
    get:
      tags:
        - mentee
      summary: Get list of mentees
      description: Retrieve a paginated list of mentees
      parameters:
        - name: page
          in: query
          description: Page number for pagination
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentees retrieved successfully
                  data:
                    type: object
                    properties:
                      mentees:
                        type: array
                        items:
                          $ref: "#/components/schemas/MenteeListItem"
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          totalPages:
                            type: integer
                            example: 5
                          totalItems:
                            type: integer
                            example: 50
                          itemsPerPage:
                            type: integer
                            example: 10
                          hasNextPage:
                            type: boolean
                            example: true
                          hasPreviousPage:
                            type: boolean
                            example: false
        "400":
          description: Invalid parameters
        "500":
          description: Internal server error
  /api/mentees/{menteeId}:
    get:
      tags:
        - mentee
      summary: Get mentee profile
      description: Retrieve detailed profile information for a specific mentee.
      parameters:
        - name: menteeId
          in: path
          required: true
          description: ID of the mentee to get
          schema:
            type: string
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentee profile retrieved successfully
                  data:
                    $ref: "#/components/schemas/MenteeProfile"
        "400":
          description: Invalid ID supplied
        "404":
          description: Mentee not found
        "500":
          description: Internal server error
    put:
      tags:
        - mentee
      summary: Update mentee profile
      description: Update profile information for a specific mentee. Only the mentee can update their own profile.
      security:
        - cookieAuth: []
      parameters:
        - name: menteeId
          in: path
          required: true
          description: ID of the mentee to update
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMenteeProfileRequest"
      responses:
        "200":
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mentee profile updated successfully
        "400":
          description: Invalid input
        "401":
          description: Unauthorized
        "403":
          description: Forbidden - can only update own profile
        "404":
          description: Mentee not found
        "500":
          description: Internal server error
  /api/users/avatar:
    put:
      tags:
        - user
      summary: Update user avatar
      description: |
        Upload a new avatar image for the authenticated user.

        **Workflow:**
        1. Frontend: User selects image and previews it locally (no server call)
        2. Frontend: User clicks "Save" to confirm
        3. Backend: Validates file, uploads to Cloudinary with optimizations, saves URL to database
        4. Backend: Automatically deletes old avatar from Cloudinary

        **Image Processing:**
        - Resized to 400x400 pixels
        - Face detection and centering applied
        - Automatic quality and format optimization (WebP for modern browsers)
        - Stored in Cloudinary with secure URL
      operationId: updateUserAvatar
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - avatar
              properties:
                avatar:
                  type: string
                  format: binary
                  description: Avatar image file (JPEG, PNG, GIF, or WebP). Maximum size 2MB.
      responses:
        "200":
          description: Avatar updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Avatar updated successfully
                  data:
                    type: object
                    properties:
                      avatar_url:
                        type: string
                        format: uri
                        example: https://res.cloudinary.com/demo/image/upload/v1234567890/user_avatars/avatar_123_1234567890.jpg
                        description: Cloudinary URL of the uploaded avatar image
        "400":
          description: Bad request - Avatar file is required or invalid file type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                noFile:
                  value:
                    success: false
                    message: Avatar image is required
                invalidType:
                  value:
                    success: false
                    message: Only image files (JPEG, PNG, GIF, WebP) are allowed
                sizeTooLarge:
                  value:
                    success: false
                    message: File size exceeds 2MB limit
        "401":
          description: Unauthorized - User not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Unauthorized - User not authenticated
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Internal server error
  /api/users/change-password:
    put:
      tags:
        - user
      summary: Change user password
      description: |
        Change the password for the authenticated user.

        **Requirements:**
        - User must be authenticated with a valid JWT token
        - User must be using local authentication (not Google OAuth)
        - Old password must be correct
        - New password must be different from old password
        - New password must match confirm password
        - Password must be 8-20 characters long

        **Workflow:**
        1. User provides current password for verification
        2. User provides new password and confirmation
        3. Backend validates old password against database
        4. Backend hashes new password and updates database
        5. User can immediately login with new password
      operationId: changeUserPassword
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangePasswordRequest"
      responses:
        "200":
          description: Password changed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: Password changed successfully
        "400":
          description: Bad request - Validation errors or incorrect old password
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/ErrorResponse"
                  - $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                incorrectOldPassword:
                  value:
                    success: false
                    message: Current password is incorrect
                googleUser:
                  value:
                    success: false
                    message: Cannot change password for Google authenticated users
                validationErrors:
                  value:
                    success: false
                    message: Validation errors
                    data:
                      errors:
                        - "New password and confirm password do not match: confirmPassword"
                        - "New password must be different from old password: newPassword"
                passwordTooShort:
                  value:
                    success: false
                    message: Validation errors
                    data:
                      errors:
                        - "Password must be at least 8 characters long: newPassword"
        "401":
          description: Unauthorized - User not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Unauthorized - User not authenticated
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Internal server error
  /api/search/mentors:
    get:
      tags:
        - search
      summary: Search mentors
      description: |-
        Search for mentors by keyword(s) across multiple fields including name, bio, headline, skills, categories, companies, job titles, and languages.
        Supports multi-keyword search with space-separated keywords (e.g., "google senior javascript").
        All keywords must match (AND logic) - each keyword must appear in at least one of the searchable fields.
        Returns a paginated list of matching mentors with complete profile information.
      operationId: searchMentors
      parameters:
        - name: keyword
          in: query
          required: true
          description: |-
            Search keyword(s) to match against mentor profiles.
            Multiple keywords separated by spaces are supported (e.g., "google senior javascript").
            All keywords must match across any of the searchable fields (AND logic).
          schema:
            type: string
            minLength: 1
            example: google senior javascript
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Search completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 15 mentors matching "javascript"
                  data:
                    $ref: "#/components/schemas/SearchMentorsResponse"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                missingKeyword:
                  value:
                    success: false
                    message: Keyword cannot be empty
                    errors:
                      - message: Keyword cannot be empty
                        path:
                          - keyword
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/search/skills:
    get:
      tags:
        - search
      summary: Search skills and categories
      description: Search for skills and categories by keyword. Returns skills and subcategories that match the search term, along with the count of mentors who have each skill/category. Useful for filtering and discovering available expertise areas.
      operationId: searchSkills
      parameters:
        - name: keyword
          in: query
          required: true
          description: Search keyword to match against skill names and category names
          schema:
            type: string
            minLength: 1
            example: Sales
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Search completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 3 skills/categories matching "Sales"
                  data:
                    $ref: "#/components/schemas/SearchSkillsResponse"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                missingKeyword:
                  value:
                    success: false
                    message: Keyword cannot be empty
                    errors:
                      - message: Keyword cannot be empty
                        path:
                          - keyword
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/search/companies:
    get:
      tags:
        - search
      summary: Search companies
      description: Search for companies by keyword. Returns companies that match the search term, along with the count of mentors who work or have worked at each company. Useful for filtering mentors by company affiliation.
      operationId: searchCompanies
      parameters:
        - name: keyword
          in: query
          required: true
          description: Search keyword to match against company names
          schema:
            type: string
            minLength: 1
            example: Google
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Search completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 2 companies matching "Google"
                  data:
                    $ref: "#/components/schemas/SearchCompaniesResponse"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                missingKeyword:
                  value:
                    success: false
                    message: Keyword cannot be empty
                    errors:
                      - message: Keyword cannot be empty
                        path:
                          - keyword
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/search/jobtitles:
    get:
      tags:
        - search
      summary: Search job titles
      description: Search for job titles by keyword. Returns job titles that match the search term, along with the count of mentors who hold or have held each job title. Useful for filtering mentors by their professional roles.
      operationId: searchJobTitles
      parameters:
        - name: keyword
          in: query
          required: true
          description: Search keyword to match against job title names
          schema:
            type: string
            minLength: 1
            example: Engineer
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Search completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 5 job titles matching "Engineer"
                  data:
                    $ref: "#/components/schemas/SearchJobTitlesResponse"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                missingKeyword:
                  value:
                    success: false
                    message: Keyword cannot be empty
                    errors:
                      - message: Keyword cannot be empty
                        path:
                          - keyword
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/catalog/supercategories:
    get:
      tags:
        - catalog
      summary: Get super categories
      description: |-
        Retrieve a paginated list of super categories (top-level categories) with mentor counts.
        Each super category includes the total number of mentors who have skills in that category or any of its subcategories.
        Results are ordered by mentor count (descending) and then by category name (ascending).
      operationId: getSuperCategories
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Super categories retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 15 super categories
                  data:
                    $ref: "#/components/schemas/SuperCategoriesData"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/catalog/skills:
    get:
      tags:
        - catalog
      summary: Get skills
      description: |-
        Retrieve a paginated list of skills with mentor counts, category, and supercategory information.
        Each skill includes the total number of mentors who possess that skill, along with its associated category and supercategory details.
        Results are ordered by mentor count (descending) and then by skill name (ascending).
      operationId: getSkills
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Skills retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 50 skills
                  data:
                    $ref: "#/components/schemas/SkillsData"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/catalog/companies:
    get:
      tags:
        - catalog
      summary: Get companies
      description: |-
        Retrieve a paginated list of companies with mentor counts.
        Each company includes the total number of mentors who work for that company.
        Results are ordered by mentor count (descending) and then by company name (ascending).
      operationId: getCompanies
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Companies retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 25 companies
                  data:
                    $ref: "#/components/schemas/CompaniesData"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/catalog/jobtitles:
    get:
      tags:
        - catalog
      summary: Get job titles
      description: |-
        Retrieve a paginated list of job titles with mentor counts.
        Each job title includes the total number of mentors who hold that job title.
        Results are ordered by mentor count (descending) and then by job title name (ascending).
      operationId: getJobTitles
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Job titles retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 30 job titles
                  data:
                    $ref: "#/components/schemas/JobTitlesData"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/catalog/countries:
    get:
      tags:
        - catalog
      summary: Get countries
      description: |-
        Retrieve a paginated list of countries with mentor counts.
        Each country includes the total number of mentors from that country.
        Results are ordered by mentor count (descending) and then by country name (ascending).
      operationId: getCountries
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Countries retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 45 countries
                  data:
                    $ref: "#/components/schemas/CountriesData"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/catalog/languages:
    get:
      tags:
        - catalog
      summary: Get languages
      description: |-
        Retrieve a paginated list of languages with mentor counts.
        Each language includes the total number of mentors who speak that language.
        Results are ordered by mentor count (descending) and then by language name (ascending).
      operationId: getLanguages
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
      responses:
        "200":
          description: Languages retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Found 20 languages
                  data:
                    $ref: "#/components/schemas/LanguagesData"
        "400":
          description: Invalid query parameters or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValidationErrorResponse"
              examples:
                invalidPage:
                  value:
                    success: false
                    message: Page must be a positive integer
                    errors:
                      - message: Page must be a positive integer
                        path:
                          - page
                invalidLimit:
                  value:
                    success: false
                    message: Limit must be between 1 and 100
                    errors:
                      - message: Limit must be between 1 and 100
                        path:
                          - limit
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/filter/mentors:
    get:
      tags:
        - filter
      summary: Filter mentors
      description: |
        Filter mentors by skills, companies, job titles, countries, languages, price range, and minimum star rating. All filters are optional and can be combined together.
      operationId: filterMentors
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (max 100, default 10)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
        - name: skillIds
          in: query
          required: false
          description: |
            List of skill IDs to filter by. Accepts comma-separated values, e.g. `1,2,3`.
          style: form
          explode: false
          schema:
            type: array
            items:
              type: integer
              format: int64
            example:
              - 1
              - 2
              - 3
        - name: companyIds
          in: query
          required: false
          description: |
            List of company IDs to filter by. Accepts comma-separated values, e.g. `10,11`.
          style: form
          explode: false
          schema:
            type: array
            items:
              type: integer
              format: int64
            example:
              - 10
              - 11
        - name: jobTitleIds
          in: query
          required: false
          description: |
            List of job title IDs to filter by. Accepts comma-separated values, e.g. `5,6`.
          style: form
          explode: false
          schema:
            type: array
            items:
              type: integer
              format: int64
            example:
              - 5
              - 6
        - name: countries
          in: query
          required: false
          description: |
            List of countries to filter by. Accepts comma-separated values, e.g. `United States,Viet Nam`.
          style: form
          explode: false
          schema:
            type: array
            items:
              type: string
            example:
              - Viet Nam
              - United States
        - name: languages
          in: query
          required: false
          description: |
            List of languages to filter by. Accepts comma-separated values, e.g. `English,Vietnamese`.
          style: form
          explode: false
          schema:
            type: array
            items:
              type: string
            example:
              - English
              - Vietnamese
        - name: minPrice
          in: query
          required: false
          description: Minimum plan price (inclusive)
          schema:
            type: number
            format: float
            example: 10
        - name: maxPrice
          in: query
          required: false
          description: Maximum plan price (inclusive)
          schema:
            type: number
            format: float
            example: 100
        - name: minRating
          in: query
          required: false
          description: Minimum average star rating (inclusive)
          schema:
            type: number
            format: float
            minimum: 0
            maximum: 5
            example: 4
      responses:
        "200":
          description: Filtered list of mentors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FilterMentorsResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/slots/plans/{planId}:
    get:
      tags:
        - slot
      summary: Get list of slots for a plan
      description: Retrieve a paginated list of time slots for a specific plan with optional filters for status and date range.
      operationId: getSlots
      parameters:
        - name: planId
          in: path
          required: true
          description: Unique identifier of the mentorship plan
          schema:
            type: integer
            example: 3
        - name: page
          in: query
          required: false
          description: Page number (default 1)
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default 10, max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            example: 10
        - name: status
          in: query
          required: false
          description: Filter by slot status
          schema:
            type: string
            enum:
              - Available
              - Booked
              - Cancelled
            example: Available
      responses:
        "200":
          description: Slots retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Slots retrieved successfully
                  data:
                    $ref: "#/components/schemas/SlotsListResponse"
        "400":
          description: Invalid query parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Mentor not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - slot
      summary: Create a new slot
      description: Create a new time slot for a specific plan. Only the mentor who owns the plan can create slots for it. Validates that the slot does not overlap with existing slots.
      operationId: createSlot
      security:
        - cookieAuth: []
      parameters:
        - name: planId
          in: path
          required: true
          description: Unique identifier of the mentorship plan
          schema:
            type: integer
            example: 3
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateSlotRequest"
      responses:
        "201":
          description: Slot created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: Slot created successfully
        "400":
          description: Invalid request data or slot already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingFields:
                  value:
                    success: false
                    message: "Missing required fields: startTime, endTime, date, and planId are required"
                invalidDates:
                  value:
                    success: false
                    message: Start time must be before end time
                slotExists:
                  value:
                    success: false
                    message: Slot already exists for this time period
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - user not authorized to create slots for this mentor
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: You are not authorized to create slots for this mentor
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/slots/plans/{planId}/slot:
    get:
      tags:
        - slot
      summary: Get a specific slot
      description: Retrieve details of a specific time slot by its composite key (planId, startTime, endTime, date).
      operationId: getSlot
      parameters:
        - name: planId
          in: path
          required: true
          description: Unique identifier of the mentorship plan
          schema:
            type: integer
            example: 3
        - name: startTime
          in: query
          required: true
          description: Slot start time (ISO 8601 format)
          schema:
            type: string
            format: date-time
            example: "2025-12-01T10:00:00Z"
        - name: endTime
          in: query
          required: true
          description: Slot end time (ISO 8601 format)
          schema:
            type: string
            format: date-time
            example: "2025-12-01T11:00:00Z"
        - name: date
          in: query
          required: true
          description: Slot date (YYYY-MM-DD or ISO 8601 format)
          schema:
            type: string
            format: date
            example: "2025-12-01"
      responses:
        "200":
          description: Slot retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Slot retrieved successfully
                  data:
                    $ref: "#/components/schemas/SlotWithPlanDetails"
        "400":
          description: Invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Slot not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                success: false
                message: Slot not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags:
        - slot
      summary: Update a slot
      description: Update a slot's status (only field that can be updated). Only the mentor who owns the plan can update its slots.
      operationId: updateSlot
      security:
        - cookieAuth: []
      parameters:
        - name: planId
          in: path
          required: true
          description: Unique identifier of the mentorship plan
          schema:
            type: integer
            example: 3
        - name: startTime
          in: query
          required: true
          description: Slot start time (ISO 8601 format)
          schema:
            type: string
            format: date-time
            example: "2025-12-01T10:00:00Z"
        - name: endTime
          in: query
          required: true
          description: Slot end time (ISO 8601 format)
          schema:
            type: string
            format: date-time
            example: "2025-12-01T11:00:00Z"
        - name: date
          in: query
          required: true
          description: Slot date (YYYY-MM-DD or ISO 8601 format)
          schema:
            type: string
            format: date
            example: "2025-12-01"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateSlotRequest"
      responses:
        "200":
          description: Slot updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: Slot updated successfully
        "400":
          description: Invalid request data or slot not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                noFields:
                  value:
                    success: false
                    message: Status is required for update
                invalidStatus:
                  value:
                    success: false
                    message: Invalid status. Must be 'Available', 'Booked', or 'Cancelled'
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - user not authorized to update slots for this mentor
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Slot not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
        - slot
      summary: Delete a slot
      description: Delete a specific time slot. Only the mentor who owns the plan can delete its slots.
      operationId: deleteSlot
      security:
        - cookieAuth: []
      parameters:
        - name: planId
          in: path
          required: true
          description: Unique identifier of the mentorship plan
          schema:
            type: integer
            example: 3
        - name: startTime
          in: query
          required: true
          description: Slot start time (ISO 8601 format)
          schema:
            type: string
            format: date-time
            example: "2025-12-01T10:00:00Z"
        - name: endTime
          in: query
          required: true
          description: Slot end time (ISO 8601 format)
          schema:
            type: string
            format: date-time
            example: "2025-12-01T11:00:00Z"
        - name: date
          in: query
          required: true
          description: Slot date (YYYY-MM-DD or ISO 8601 format)
          schema:
            type: string
            format: date
            example: "2025-12-01"
      responses:
        "200":
          description: Slot deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                success: true
                message: Slot deleted successfully
        "400":
          description: Invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - user not authorized to delete slots for this mentor
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Slot not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/pay/checkout-session:
    post:
      tags:
        - payment
      summary: Create Stripe Checkout Session
      description: Creates a Stripe Checkout Session for booking a mentor's slot with an optional discount code
      operationId: createCheckoutSession
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - menteeId
                - mentorId
                - planId
                - slotStartTime
                - slotEndTime
                - message
              properties:
                menteeId:
                  type: integer
                  description: ID of the mentee making the booking
                  example: 1
                mentorId:
                  type: integer
                  description: ID of the mentor being booked
                  example: 5
                planId:
                  type: integer
                  description: ID of the selected plan
                  example: 3
                slotStartTime:
                  type: string
                  format: date-time
                  description: Start date and time of the slot in ISO 8601 format
                  example: "2024-01-15T14:00:00.000Z"
                slotEndTime:
                  type: string
                  format: date-time
                  description: End date and time of the slot in ISO 8601 format
                  example: "2024-01-15T15:00:00.000Z"
                message:
                  type: string
                  description: Message from mentee to mentor (discussion content)
                  minLength: 1
                  maxLength: 1000
                  example: I would like to discuss career transition strategies.
                discountCode:
                  type: string
                  description: Optional discount code to apply
                  example: SUMMER2024
      responses:
        "200":
          description: Checkout session created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Checkout session created successfully
                  data:
                    type: object
                    properties:
                      sessionId:
                        type: string
                        description: Stripe Checkout Session ID
                        example: cs_test_a1b2c3d4e5f6g7h8i9j0
                      sessionUrl:
                        type: string
                        description: URL to redirect user for payment
                        example: https://checkout.stripe.com/pay/cs_test_a1b2c3d4e5f6g7h8i9j0
        "400":
          description: Validation error or invalid booking request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Slot is not available
        "401":
          description: Unauthorized - user not authenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthorized - No Token Provided
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Internal server error
  /api/pay/webhook:
    post:
      tags:
        - payment
      summary: Stripe Webhook Endpoint
      description: |
        Handles Stripe webhook events. This endpoint is called by Stripe directly and should not be called by clients.
        Currently handles: checkout.session.completed
      operationId: handleStripeWebhook
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: Stripe webhook event payload
      responses:
        "200":
          description: Webhook received and processed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Webhook received
        "400":
          description: Invalid webhook signature or missing header
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Missing stripe-signature header
        "500":
          description: Error processing webhook
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Error processing webhook
  /api/messages/users:
    get:
      tags:
        - messages
      summary: Get users for sidebar
      description: |
        Retrieve a list of all users (excluding current user) for the chat sidebar.
        Returns basic user information to display conversation list.
      operationId: getUsersForSidebar
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/UserForSidebar"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/messages/conversations:
    get:
      tags:
        - messages
      summary: Get user conversations
      description: |
        Retrieve all conversations for the current user with latest message preview.
        Each conversation includes the other user's info and the most recent message.
        Results are ordered by most recent message first.
      operationId: getConversations
      security:
        - cookieAuth: []
      responses:
        "200":
          description: Conversations retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Conversation"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/messages/{userId}:
    get:
      tags:
        - messages
      summary: Get messages with specific user
      description: |
        Retrieve all messages exchanged between the current user and another user.
        Returns messages in chronological order (oldest first).
        Used to display full chat history when opening a conversation.
      operationId: getMessagesByUserId
      security:
        - cookieAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          description: ID of the other user in the conversation
          schema:
            type: integer
            example: 2
      responses:
        "200":
          description: Messages retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Message"
        "400":
          description: Invalid user ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /api/messages:
    post:
      tags:
        - messages
      summary: Send a message
      description: |
        Send a new message to another user. The message is saved to the database
        and if the receiver is online (connected via Socket.IO), they will receive
        the message in realtime via the 'newMessage' event.

        **WebSocket Integration:**
        - When receiver is online: Message delivered instantly via Socket.IO
        - When receiver is offline: Message stored in DB, delivered when they reconnect

        **Socket.IO Events:**
        - Emits: `newMessage` event to receiver's socket (if online)
        - Event payload: Complete message object with sender/receiver info
      operationId: sendMessage
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendMessageRequest"
      responses:
        "201":
          description: Message sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: "#/components/schemas/Message"
        "400":
          description: Invalid request - missing receiver_id or content
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - user not logged in
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
components:
  schemas:
    RegisterRequest:
      type: object
      required:
        - firstName
        - lastName
        - email
        - password
      properties:
        firstName:
          type: string
          minLength: 1
          example: John
          description: User's first name
        lastName:
          type: string
          minLength: 1
          example: Doe
          description: User's last name
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's email address (must be unique)
        password:
          type: string
          minLength: 8
          maxLength: 20
          example: securepassword123
          description: User's password (8-20 characters)
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Operation completed successfully
    ValidationErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Validation errors
        data:
          type: object
          properties:
            errors:
              type: array
              items:
                type: string
              example:
                - "Email is invalid: email"
                - "Password must be at least 8 characters long: password"
            oldData:
              type: object
              description: Previously submitted data (excluding sensitive fields like password)
              example:
                firstName: John
                lastName: Doe
                email: invalid-email
                password: ""
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Error occurred
    OTPRequest:
      type: object
      required:
        - otp
      properties:
        otp:
          type: string
          example: "123456"
          description: 6-digit OTP code sent to user's email
    ResendOTPRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's registered email address to resend OTP
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's email address
        password:
          type: string
          example: securepassword123
          description: User's password
    ForgotPasswordRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's registered email address
    ResetPasswordRequest:
      type: object
      required:
        - newPassword
      properties:
        newPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: newsecurepassword123
          description: New password (8-20 characters)
    User:
      type: object
      properties:
        user_id:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174000
          description: Unique user identifier
        firstName:
          type: string
          example: John
          description: User's first name
        lastName:
          type: string
          example: Doe
          description: User's last name
        sex:
          type: string
          enum:
            - Male
            - Female
          example: Male
          description: User's gender
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's email address
        avatar_url:
          type: string
          format: uri
          example: https://example.com/avatars/johndoe.jpg
          description: URL to user's avatar image
        country:
          type: string
          example: USA
          description: User's country of residence
        role:
          type: string
          enum:
            - Mentee
            - Mentor
            - Admin
          example: Mentee
          description: User's role in the platform
        timezone:
          type: string
          example: America/New_York
          description: User's timezone
        status:
          type: string
          enum:
            - Active
            - Inactive
            - Banned
            - Pending
          example: Active
          description: User's account status
        google_id:
          type: string
          nullable: true
          example: google-oauth2|123456789012345678901
          description: Google OAuth2 ID if registered via Google
        provider:
          type: string
          enum:
            - Local
            - Google
          example: Local
          description: Authentication provider used
        created_at:
          type: string
          format: date-time
          example: "2023-10-25T10:30:00Z"
          description: Account creation timestamp
        updated_at:
          type: string
          format: date-time
          example: "2023-10-25T10:30:00Z"
          description: Last account update timestamp
    Skill:
      type: object
      properties:
        skill_id:
          type: integer
          example: 1
          description: Unique skill identifier
        skill_name:
          type: string
          example: JavaScript
          description: Skill or area of expertise
    Company:
      type: object
      properties:
        company_id:
          type: integer
          example: 1
          description: Unique company identifier
        company_name:
          type: string
          example: Tech Corp
          description: Company name
        job_title_id:
          type: integer
          example: 3
          description: Unique job title identifier
        job_name:
          type: string
          example: Senior Software Engineer
          description: Mentor's job title at the company
    MentorListItem:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        avatar_url:
          type: string
          nullable: true
          format: uri
          example: https://example.com/avatars/mentor-john.jpg
        country:
          type: string
          nullable: true
          example: USA
        bio:
          type: string
          nullable: true
          example: Experienced software engineer with 10+ years
        headline:
          type: string
          nullable: true
          example: Senior Software Engineer at Tech Corp
        response_time:
          type: string
          example: Within 24 hours
          description: Average response time description
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from all feedbacks
        lowest_plan_price:
          type: number
          nullable: true
          format: decimal
          example: 49.99
          description: Lowest price among all plans offered by the mentor
        skills:
          type: array
          items:
            $ref: "#/components/schemas/Skill"
          description: Mentor's skills and areas of expertise
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
          description: Languages spoken by the mentor
        companies:
          type: array
          items:
            $ref: "#/components/schemas/Company"
          description: Companies where mentor works or has worked
        categories:
          type: array
          items:
            type: object
            properties:
              category_id:
                type: integer
                example: 1
                description: Unique category identifier
              category_name:
                type: string
                example: Web Development
                description: Category name
          description: Categories associated with the mentor's skills
    PaginationInfo:
      type: object
      properties:
        currentPage:
          type: integer
          example: 1
        totalPages:
          type: integer
          example: 5
        totalItems:
          type: integer
          example: 47
        itemsPerPage:
          type: integer
          example: 10
        hasNextPage:
          type: boolean
          example: true
        hasPreviousPage:
          type: boolean
          example: false
    MentorsListResponse:
      type: object
      properties:
        mentors:
          type: array
          items:
            $ref: "#/components/schemas/MentorListItem"
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
    MentorStatsResponse:
      type: object
      properties:
        total_mentees:
          type: integer
          example: 25
          description: Total number of unique mentees guided by the mentor
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received by the mentor
        total_stars:
          type: integer
          example: 72
          description: Total cumulative star rating from all feedbacks
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from feedbacks (total_stars / total_feedbacks)
    SocialLink:
      type: object
      properties:
        link:
          type: string
          format: uri
          example: https://linkedin.com/in/johndoe
          description: URL to social media profile
        platform:
          type: string
          example: LinkedIn
          description: Social media platform name
    Plan:
      type: object
      properties:
        plan_id:
          type: integer
          example: 1
          description: Unique plan identifier
        plan_description:
          type: string
          example: 1-hour mentorship session with personalized career guidance
          description: Description of the mentorship plan
        plan_charge:
          type: number
          format: decimal
          example: 99.99
          description: Cost of the plan
        plan_type:
          type: string
          example: Session
          description: Type of plan (Session or Mentorship)
        sessions_duration:
          type: integer
          nullable: true
          example: 60
          description: Duration of session in minutes (only for Session type plans)
        benefits:
          type: array
          nullable: true
          items:
            type: string
          example:
            - 1-on-1 video call
            - Code review
            - Career guidance
          description: List of benefits included in the plan (only for Mentorship type plans)
    Feedback:
      type: object
      properties:
        mentee_id:
          type: integer
          example: 5
          description: Unique mentee identifier
        mentee_first_name:
          type: string
          example: Jane
          description: Mentee's first name
        mentee_last_name:
          type: string
          example: Smith
          description: Mentee's last name
        stars:
          type: integer
          minimum: 1
          maximum: 5
          example: 5
          description: Star rating given by the mentee (1-5)
        content:
          type: string
          example: Excellent mentor! Very helpful and knowledgeable.
          description: Feedback content/review text
        sent_time:
          type: string
          format: date-time
          example: "2025-11-20T14:30:00Z"
          description: Timestamp when feedback was submitted
        plan_id:
          type: integer
          nullable: true
          example: 3
          description: ID of the plan/package the mentee registered for
        plan_type:
          type: string
          nullable: true
          example: Session
          description: Type of plan (Session or Mentorship)
        plan_description:
          type: string
          nullable: true
          example: 1-hour career guidance session
          description: Description of the mentorship plan
        plan_charge:
          type: number
          nullable: true
          format: decimal
          example: 99.99
          description: Cost of the plan the mentee registered for
    MentorProfileResponse:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
          description: Unique mentor identifier
        first_name:
          type: string
          example: John
          description: Mentor's first name
        last_name:
          type: string
          example: Doe
          description: Mentor's last name
        email:
          type: string
          format: email
          example: john.mentor@example.com
          description: Mentor's email address
        sex:
          type: string
          nullable: true
          enum:
            - Male
            - Female
          example: Male
          description: Mentor's gender
        avatar_url:
          type: string
          nullable: true
          format: uri
          example: https://example.com/avatars/mentor-john.jpg
          description: URL to mentor's avatar image
        country:
          type: string
          nullable: true
          example: USA
          description: Mentor's country of residence
        timezone:
          type: string
          nullable: true
          example: America/New_York
          description: Mentor's timezone
        bio:
          type: string
          nullable: true
          example: Experienced software engineer with 10+ years in web development
          description: Mentor's biography
        headline:
          type: string
          nullable: true
          example: Senior Software Engineer at Tech Corp
          description: Mentor's professional headline
        response_time:
          type: string
          example: Within 24 hours
          description: Average response time description
        cv_url:
          type: string
          nullable: true
          format: uri
          example: https://cloudinary.com/cvs/mentor-john-cv.pdf
          description: URL to mentor's CV (PDF)
        social_links:
          type: array
          items:
            $ref: "#/components/schemas/SocialLink"
          description: Mentor's social media links
        companies:
          type: array
          items:
            $ref: "#/components/schemas/Company"
          description: Companies where mentor has worked
        skills:
          type: array
          items:
            $ref: "#/components/schemas/Skill"
          description: Skills and areas of expertise
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
            - French
          description: Languages spoken by mentor
        plans:
          type: array
          items:
            $ref: "#/components/schemas/Plan"
          description: Mentorship plans offered by mentor
        total_mentees:
          type: integer
          example: 25
          description: Total number of unique mentees guided
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received
        total_stars:
          type: integer
          example: 72
          description: Total cumulative star rating from all feedbacks
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from feedbacks (total_stars / total_feedbacks)
        feedbacks:
          type: array
          items:
            $ref: "#/components/schemas/Feedback"
          description: Feedback reviews from mentees with plan information
    UpdateMentorProfileRequest:
      type: object
      properties:
        firstName:
          type: string
          minLength: 1
          example: John
          description: Mentor's first name
        lastName:
          type: string
          minLength: 1
          example: Doe
          description: Mentor's last name
        sex:
          type: string
          enum:
            - Male
            - Female
          example: Male
          description: Mentor's gender
        country:
          type: string
          example: USA
          description: Mentor's country of residence
        timezone:
          type: string
          example: America/New_York
          description: Mentor's timezone
        bio:
          type: string
          example: Experienced software engineer with 10+ years in web development
          description: Mentor's biography
        headline:
          type: string
          example: Senior Software Engineer at Tech Corp
          description: Mentor's professional headline
        responseTime:
          type: string
          example: Within 24 hours
          description: Average response time description (e.g., 'Within 1 hour', '1-2 days')
        cvUrl:
          type: string
          format: uri
          example: https://cloudinary.com/cvs/mentor-john-cv.pdf
          description: URL to mentor's CV (PDF)
        socialLinks:
          type: array
          items:
            type: object
            required:
              - link
              - platform
            properties:
              link:
                type: string
                format: uri
                example: https://linkedin.com/in/johndoe
              platform:
                type: string
                example: LinkedIn
          description: Mentor's social media links
        companies:
          type: array
          items:
            type: object
            required:
              - companyName
              - jobTitleName
            properties:
              companyName:
                type: string
                example: Tech Corp
              jobTitleName:
                type: string
                example: Senior Software Engineer
          example:
            - companyName: Tech Corp
              jobTitleName: Senior Software Engineer
            - companyName: Web Solutions
              jobTitleName: Frontend Developer
          description: Companies where mentor has worked or is working
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
            - French
          description: Languages spoken by mentor
        skillIds:
          type: array
          items:
            type: integer
          example:
            - 1
            - 2
            - 3
          description: Array of skill IDs representing areas of expertise
    MenteeListItem:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        avatar_url:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
        goal:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
    MenteeProfile:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        email:
          type: string
          format: email
          example: john.doe@example.com
        sex:
          type: string
          enum:
            - Male
            - Female
          nullable: true
        avatar_url:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
        timezone:
          type: string
          nullable: true
        goal:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
          nullable: true
        is_email_verified:
          type: boolean
          default: false
    UpdateMenteeProfileRequest:
      type: object
      properties:
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: Doe
        sex:
          type: string
          enum:
            - Male
            - Female
        country:
          type: string
        timezone:
          type: string
        goal:
          type: string
    ChangePasswordRequest:
      type: object
      required:
        - oldPassword
        - newPassword
        - confirmPassword
      properties:
        oldPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: currentpassword123
          description: User's current password
        newPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: newsecurepassword123
          description: New password (8-20 characters, must be different from old password)
        confirmPassword:
          type: string
          minLength: 8
          maxLength: 20
          example: newsecurepassword123
          description: Confirmation of new password (must match newPassword)
    Category:
      type: object
      properties:
        category_id:
          type: integer
          example: 1
          description: Unique category identifier
        category_name:
          type: string
          example: Web Development
          description: Category name
    SearchMentorListItem:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
          description: Unique mentor identifier
        first_name:
          type: string
          example: John
          description: Mentor's first name
        last_name:
          type: string
          example: Doe
          description: Mentor's last name
        avatar_url:
          type: string
          nullable: true
          format: uri
          example: https://example.com/avatars/mentor-john.jpg
          description: URL to mentor's avatar image
        country:
          type: string
          nullable: true
          example: USA
          description: Mentor's country of residence
        bio:
          type: string
          nullable: true
          example: Experienced JavaScript developer with 10+ years
          description: Mentor's biography
        headline:
          type: string
          nullable: true
          example: Senior JavaScript Engineer at Tech Corp
          description: Mentor's professional headline
        response_time:
          type: string
          example: Within 24 hours
          description: Average response time description
        total_feedbacks:
          type: integer
          example: 15
          description: Total number of feedback entries received
        average_rating:
          type: number
          nullable: true
          format: float
          example: 4.8
          description: Average rating calculated from all feedbacks
        lowest_plan_price:
          type: number
          nullable: true
          format: decimal
          example: 49.99
          description: Lowest price among all plans offered by the mentor
        skills:
          type: array
          items:
            $ref: "#/components/schemas/Skill"
          description: Mentor's skills and areas of expertise
        languages:
          type: array
          items:
            type: string
          example:
            - English
            - Spanish
          description: Languages spoken by the mentor
        companies:
          type: array
          items:
            $ref: "#/components/schemas/Company"
          description: Companies where mentor works or has worked
        categories:
          type: array
          items:
            $ref: "#/components/schemas/Category"
          description: Categories associated with the mentor's skills
    SearchMentorsResponse:
      type: object
      properties:
        mentors:
          type: array
          items:
            $ref: "#/components/schemas/SearchMentorListItem"
          description: Array of mentors matching the search criteria
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
          description: Pagination information for the search results
        searchInfo:
          type: object
          properties:
            keyword:
              type: string
              example: google senior javascript
              description: The original keyword string used for searching
            keywords:
              type: array
              items:
                type: string
              example:
                - google
                - senior
                - javascript
              description: Array of individual keywords parsed from the keyword string (space-separated)
            searchedFields:
              type: array
              items:
                type: string
              example:
                - first_name
                - last_name
                - full_name
                - bio
                - headline
                - skills
                - categories
                - companies
                - job_titles
                - languages
              description: List of fields that were searched
          description: Information about the search query and scope
    SkillCategoryItem:
      type: object
      properties:
        id:
          type: integer
          example: 49
          description: Unique identifier for the skill or category
        name:
          type: string
          example: Sales
          description: Name of the skill or category
        type:
          type: string
          enum:
            - skill
            - category
          example: category
          description: Type indicating whether this is a skill or a category
        super_category_id:
          type: integer
          nullable: true
          example: 38
          description: ID of the parent category (null for skills or top-level categories)
        mentor_count:
          type: integer
          example: 5
          description: Number of mentors who have this skill or teach in this category
    SearchSkillsResponse:
      type: object
      properties:
        results:
          type: array
          items:
            $ref: "#/components/schemas/SkillCategoryItem"
          description: Array of skills and categories matching the search criteria
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
          description: Pagination information for the search results
        searchInfo:
          type: object
          properties:
            keyword:
              type: string
              example: Sales
              description: The original keyword string used for searching
            keywords:
              type: array
              items:
                type: string
              example:
                - Sales
              description: Array of individual keywords parsed from the keyword string
          description: Information about the search query
    CompanyItem:
      type: object
      properties:
        id:
          type: integer
          example: 1
          description: Unique identifier for the company
        name:
          type: string
          example: Google
          description: Name of the company
        mentor_count:
          type: integer
          example: 12
          description: Number of mentors who work or have worked at this company
    SearchCompaniesResponse:
      type: object
      properties:
        results:
          type: array
          items:
            $ref: "#/components/schemas/CompanyItem"
          description: Array of companies matching the search criteria
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
          description: Pagination information for the search results
        searchInfo:
          type: object
          properties:
            keyword:
              type: string
              example: Google
              description: The original keyword string used for searching
            keywords:
              type: array
              items:
                type: string
              example:
                - Google
              description: Array of individual keywords parsed from the keyword string
          description: Information about the search query
    JobTitleItem:
      type: object
      properties:
        id:
          type: integer
          example: 3
          description: Unique identifier for the job title
        name:
          type: string
          example: Software Engineer
          description: Name of the job title
        mentor_count:
          type: integer
          example: 8
          description: Number of mentors who hold or have held this job title
    SearchJobTitlesResponse:
      type: object
      properties:
        results:
          type: array
          items:
            $ref: "#/components/schemas/JobTitleItem"
          description: Array of job titles matching the search criteria
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
          description: Pagination information for the search results
        searchInfo:
          type: object
          properties:
            keyword:
              type: string
              example: Engineer
              description: The original keyword string used for searching
            keywords:
              type: array
              items:
                type: string
              example:
                - Engineer
              description: Array of individual keywords parsed from the keyword string
          description: Information about the search query
    SuperCategoryItem:
      type: object
      description: A super category with its ID, name, and the count of mentors who have skills in this category or its subcategories
      properties:
        category_id:
          type: integer
          description: Unique identifier for the category
          example: 1
        category_name:
          type: string
          description: Name of the super category
          example: Technology & Programming
        mentor_count:
          type: integer
          description: Total number of mentors who have skills in this category or any of its subcategories
          example: 42
      required:
        - category_id
        - category_name
        - mentor_count
    catalog_PaginationInfo:
      type: object
      description: Pagination metadata for list responses
      properties:
        currentPage:
          type: integer
          description: Current page number
          example: 1
        totalPages:
          type: integer
          description: Total number of pages available
          example: 5
        totalItems:
          type: integer
          description: Total number of items across all pages
          example: 42
        itemsPerPage:
          type: integer
          description: Number of items per page
          example: 10
        hasNextPage:
          type: boolean
          description: Whether there is a next page available
          example: true
        hasPreviousPage:
          type: boolean
          description: Whether there is a previous page available
          example: false
      required:
        - currentPage
        - totalPages
        - totalItems
        - itemsPerPage
        - hasNextPage
        - hasPreviousPage
    SuperCategoriesData:
      type: object
      description: Data object containing super categories and pagination information
      properties:
        categories:
          type: array
          description: List of super categories
          items:
            $ref: "#/components/schemas/SuperCategoryItem"
        pagination:
          $ref: "#/components/schemas/catalog_PaginationInfo"
      required:
        - categories
        - pagination
    SkillItem:
      type: object
      description: A skill with its ID, name, category information, and the count of mentors who possess this skill
      properties:
        skill_id:
          type: integer
          description: Unique identifier for the skill
          example: 5
        skill_name:
          type: string
          description: Name of the skill
          example: JavaScript
        mentor_count:
          type: integer
          description: Total number of mentors who possess this skill
          example: 28
        category_id:
          type: integer
          nullable: true
          description: Unique identifier for the category this skill belongs to
          example: 3
        category_name:
          type: string
          nullable: true
          description: Name of the category this skill belongs to
          example: Web Development
        super_category_id:
          type: integer
          nullable: true
          description: Unique identifier for the super category (parent category)
          example: 1
        super_category_name:
          type: string
          nullable: true
          description: Name of the super category (parent category)
          example: Technology & Programming
      required:
        - skill_id
        - skill_name
        - mentor_count
        - category_id
        - category_name
        - super_category_id
        - super_category_name
    SkillsData:
      type: object
      description: Data object containing skills and pagination information
      properties:
        skills:
          type: array
          description: List of skills
          items:
            $ref: "#/components/schemas/SkillItem"
        pagination:
          $ref: "#/components/schemas/catalog_PaginationInfo"
      required:
        - skills
        - pagination
    catalog_CompanyItem:
      type: object
      description: A company with its ID, name, and the count of mentors who work for this company
      properties:
        company_id:
          type: integer
          description: Unique identifier for the company
          example: 10
        company_name:
          type: string
          description: Name of the company
          example: Google
        mentor_count:
          type: integer
          description: Total number of mentors who work for this company
          example: 15
      required:
        - company_id
        - company_name
        - mentor_count
    CompaniesData:
      type: object
      description: Data object containing companies and pagination information
      properties:
        companies:
          type: array
          description: List of companies
          items:
            $ref: "#/components/schemas/catalog_CompanyItem"
        pagination:
          $ref: "#/components/schemas/catalog_PaginationInfo"
      required:
        - companies
        - pagination
    catalog_JobTitleItem:
      type: object
      description: A job title with its ID, name, and the count of mentors who hold this job title
      properties:
        job_title_id:
          type: integer
          description: Unique identifier for the job title
          example: 8
        job_title_name:
          type: string
          description: Name of the job title
          example: Senior Software Engineer
        mentor_count:
          type: integer
          description: Total number of mentors who hold this job title
          example: 12
      required:
        - job_title_id
        - job_title_name
        - mentor_count
    JobTitlesData:
      type: object
      description: Data object containing job titles and pagination information
      properties:
        jobTitles:
          type: array
          description: List of job titles
          items:
            $ref: "#/components/schemas/catalog_JobTitleItem"
        pagination:
          $ref: "#/components/schemas/catalog_PaginationInfo"
      required:
        - jobTitles
        - pagination
    CountryItem:
      type: object
      description: A country with the count of mentors from that country
      properties:
        country:
          type: string
          description: Name of the country
          example: United States
        mentor_count:
          type: integer
          description: Total number of mentors from this country
          example: 18
      required:
        - country
        - mentor_count
    CountriesData:
      type: object
      description: Data object containing countries and pagination information
      properties:
        countries:
          type: array
          description: List of countries
          items:
            $ref: "#/components/schemas/CountryItem"
        pagination:
          $ref: "#/components/schemas/catalog_PaginationInfo"
      required:
        - countries
        - pagination
    LanguageItem:
      type: object
      description: A language with the count of mentors who speak that language
      properties:
        language:
          type: string
          description: Name of the language
          example: English
        mentor_count:
          type: integer
          description: Total number of mentors who speak this language
          example: 25
      required:
        - language
        - mentor_count
    LanguagesData:
      type: object
      description: Data object containing languages and pagination information
      properties:
        languages:
          type: array
          description: List of languages
          items:
            $ref: "#/components/schemas/LanguageItem"
        pagination:
          $ref: "#/components/schemas/catalog_PaginationInfo"
      required:
        - languages
        - pagination
    FilterMentorsData:
      type: object
      description: Data payload for filtered mentors list
      properties:
        mentors:
          type: array
          description: List of mentors matching the filter criteria
          items:
            $ref: "#/components/schemas/MentorListItem"
        pagination:
          description: Pagination information for the result set
          $ref: "#/components/schemas/PaginationInfo"
      required:
        - mentors
        - pagination
    FilterMentorsResponse:
      type: object
      description: Response object for mentors filter API
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Found 3 mentor(s)
        data:
          $ref: "#/components/schemas/FilterMentorsData"
      required:
        - success
        - message
        - data
    SlotWithPlanDetails:
      type: object
      properties:
        start_time:
          type: string
          format: date-time
          example: "2025-12-01T10:00:00Z"
          description: Start time of the slot
        end_time:
          type: string
          format: date-time
          example: "2025-12-01T11:00:00Z"
          description: End time of the slot
        date:
          type: string
          format: date
          example: "2025-12-01"
          description: Date of the slot
        mentor_id:
          type: integer
          example: 1
          description: ID of the mentor who owns this slot
        status:
          type: string
          enum:
            - Available
            - Booked
            - Cancelled
          example: Available
          description: Current status of the slot
        plan_id:
          type: integer
          example: 3
          description: ID of the associated mentorship plan
        plan_description:
          type: string
          example: 1-hour career guidance session
          description: Description of the mentorship plan
        plan_charge:
          type: number
          format: decimal
          example: 99.99
          description: Cost of the mentorship plan
        plan_type:
          type: string
          example: Session
          description: Type of plan (Session or Mentorship)
    SlotsListResponse:
      type: object
      properties:
        slots:
          type: array
          items:
            $ref: "#/components/schemas/SlotWithPlanDetails"
        pagination:
          $ref: "#/components/schemas/PaginationInfo"
    CreateSlotRequest:
      type: object
      required:
        - startTime
        - endTime
        - date
      properties:
        startTime:
          type: string
          format: date-time
          example: "2025-12-01T10:00:00Z"
          description: Start time of the slot in ISO 8601 format
        endTime:
          type: string
          format: date-time
          example: "2025-12-01T11:00:00Z"
          description: End time of the slot in ISO 8601 format
        date:
          type: string
          format: date
          example: "2025-12-01"
          description: Date of the slot (YYYY-MM-DD or ISO 8601 format)
        status:
          type: string
          enum:
            - Available
            - Booked
            - Cancelled
          default: Available
          example: Available
          description: Status of the slot
    UpdateSlotRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum:
            - Available
            - Booked
            - Cancelled
          example: Booked
          description: Updated status of the slot (only field that can be updated)
    UserForSidebar:
      type: object
      description: Basic user information for chat sidebar display
      properties:
        user_id:
          type: integer
          example: 2
          description: Unique user identifier
        first_name:
          type: string
          example: Alice
          description: User's first name
        last_name:
          type: string
          example: Smith
          description: User's last name
        avatar_url:
          type: string
          format: uri
          example: https://i.pravatar.cc/150?img=20
          nullable: true
          description: URL to user's avatar image
        role:
          type: string
          enum:
            - Mentor
            - Mentee
            - Admin
          example: Mentee
          description: User's role in the platform
      required:
        - user_id
        - first_name
        - last_name
        - role
    Conversation:
      type: object
      description: A conversation with another user including latest message
      properties:
        other_user_id:
          type: integer
          example: 2
          description: ID of the other user in the conversation
        other_user_first_name:
          type: string
          example: Alice
          description: Other user's first name
        other_user_last_name:
          type: string
          example: Smith
          description: Other user's last name
        other_user_avatar_url:
          type: string
          format: uri
          example: https://i.pravatar.cc/150?img=20
          nullable: true
          description: URL to other user's avatar image
        other_user_role:
          type: string
          enum:
            - Mentor
            - Mentee
            - Admin
          example: Mentee
          description: Other user's role
        latest_message_content:
          type: string
          example: Thanks for your help!
          description: Content of the most recent message
        latest_message_time:
          type: string
          format: date-time
          example: "2025-11-27T15:20:30.000Z"
          description: Timestamp of the most recent message
        latest_message_sender_id:
          type: integer
          example: 2
          description: ID of who sent the latest message (current user or other user)
      required:
        - other_user_id
        - other_user_first_name
        - other_user_last_name
        - other_user_role
        - latest_message_content
        - latest_message_time
        - latest_message_sender_id
    Message:
      type: object
      description: A chat message between two users
      properties:
        message_id:
          type: integer
          example: 123
          description: Unique message identifier
        sender_id:
          type: integer
          example: 1
          description: ID of the user who sent the message
        receiver_id:
          type: integer
          example: 2
          description: ID of the user who receives the message
        content:
          type: string
          example: Hello! How can I help you today?
          description: Message text content
        sent_time:
          type: string
          format: date-time
          example: "2025-11-27T12:30:45.000Z"
          description: Timestamp when message was sent
      required:
        - message_id
        - sender_id
        - receiver_id
        - content
        - sent_time
    SendMessageRequest:
      type: object
      description: Request body for sending a new message
      properties:
        receiver_id:
          type: integer
          example: 2
          description: ID of the user who will receive the message
        content:
          type: string
          example: Hello! I'd like to schedule a session.
          minLength: 1
          maxLength: 5000
          description: Message text content (1-5000 characters)
      required:
        - receiver_id
        - content
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: token
      description: JWT token obtained from login or OAuth. Token is automatically sent as HTTP-only cookie named 'token'.
