slotsList:
  get:
    tags:
      - slot
    summary: Get list of slots for a plan
    description: Retrieve a paginated list of time slots for a specific plan with optional filters for status and date range.
    operationId: getSlots
    parameters:
      - name: planId
        in: path
        required: true
        description: Unique identifier of the mentorship plan
        schema:
          type: integer
          example: 3
      - name: page
        in: query
        required: false
        description: Page number (default 1)
        schema:
          type: integer
          minimum: 1
          example: 1
      - name: limit
        in: query
        required: false
        description: Number of items per page (default 10, max 100)
        schema:
          type: integer
          minimum: 1
          maximum: 100
          example: 10
      - name: status
        in: query
        required: false
        description: Filter by slot status
        schema:
          type: string
          enum: ["Available", "Booked", "Cancelled"]
          example: "Available"
    responses:
      "200":
        description: Slots retrieved successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                  example: true
                message:
                  type: string
                  example: "Slots retrieved successfully"
                data:
                  $ref: "../schemas/slot.yaml#/SlotsListResponse"
      "400":
        description: Invalid query parameters
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "404":
        description: Mentor not found
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "500":
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
  post:
    tags:
      - slot
    summary: Create a new slot
    description: Create a new time slot for a specific plan. Only the mentor who owns the plan can create slots for it. Validates that the slot does not overlap with existing slots.
    operationId: createSlot
    security:
      - cookieAuth: []
    parameters:
      - name: planId
        in: path
        required: true
        description: Unique identifier of the mentorship plan
        schema:
          type: integer
          example: 3
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/slot.yaml#/CreateSlotRequest"
    responses:
      "201":
        description: Slot created successfully
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/SuccessResponse"
            example:
              success: true
              message: "Slot created successfully"
      "400":
        description: Invalid request data or slot already exists
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
            examples:
              missingFields:
                value:
                  success: false
                  message: "Missing required fields: startTime, endTime, date, and planId are required"
              invalidDates:
                value:
                  success: false
                  message: "Start time must be before end time"
              slotExists:
                value:
                  success: false
                  message: "Slot already exists for this time period"
      "401":
        description: Unauthorized - user not logged in
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "403":
        description: Forbidden - user not authorized to create slots for this mentor
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
            example:
              success: false
              message: "You are not authorized to create slots for this mentor"
      "500":
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"

slotDetail:
  get:
    tags:
      - slot
    summary: Get a specific slot
    description: Retrieve details of a specific time slot by its composite key (planId, startTime, endTime, date).
    operationId: getSlot
    parameters:
      - name: planId
        in: path
        required: true
        description: Unique identifier of the mentorship plan
        schema:
          type: integer
          example: 3
      - name: startTime
        in: query
        required: true
        description: Slot start time (ISO 8601 format)
        schema:
          type: string
          format: date-time
          example: "2025-12-01T10:00:00Z"
      - name: endTime
        in: query
        required: true
        description: Slot end time (ISO 8601 format)
        schema:
          type: string
          format: date-time
          example: "2025-12-01T11:00:00Z"
      - name: date
        in: query
        required: true
        description: Slot date (YYYY-MM-DD or ISO 8601 format)
        schema:
          type: string
          format: date
          example: "2025-12-01"
    responses:
      "200":
        description: Slot retrieved successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                  example: true
                message:
                  type: string
                  example: "Slot retrieved successfully"
                data:
                  $ref: "../schemas/slot.yaml#/SlotWithPlanDetails"
      "400":
        description: Invalid parameters
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "404":
        description: Slot not found
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
            example:
              success: false
              message: "Slot not found"
      "500":
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
  put:
    tags:
      - slot
    summary: Update a slot
    description: Update a slot's status (only field that can be updated). Only the mentor who owns the plan can update its slots.
    operationId: updateSlot
    security:
      - cookieAuth: []
    parameters:
      - name: planId
        in: path
        required: true
        description: Unique identifier of the mentorship plan
        schema:
          type: integer
          example: 3
      - name: startTime
        in: query
        required: true
        description: Slot start time (ISO 8601 format)
        schema:
          type: string
          format: date-time
          example: "2025-12-01T10:00:00Z"
      - name: endTime
        in: query
        required: true
        description: Slot end time (ISO 8601 format)
        schema:
          type: string
          format: date-time
          example: "2025-12-01T11:00:00Z"
      - name: date
        in: query
        required: true
        description: Slot date (YYYY-MM-DD or ISO 8601 format)
        schema:
          type: string
          format: date
          example: "2025-12-01"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/slot.yaml#/UpdateSlotRequest"
    responses:
      "200":
        description: Slot updated successfully
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/SuccessResponse"
            example:
              success: true
              message: "Slot updated successfully"
      "400":
        description: Invalid request data or slot not found
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
            examples:
              noFields:
                value:
                  success: false
                  message: "Status is required for update"
              invalidStatus:
                value:
                  success: false
                  message: "Invalid status. Must be 'Available', 'Booked', or 'Cancelled'"
      "401":
        description: Unauthorized - user not logged in
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "403":
        description: Forbidden - user not authorized to update slots for this mentor
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "404":
        description: Slot not found
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "500":
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
  delete:
    tags:
      - slot
    summary: Delete a slot
    description: Delete a specific time slot. Only the mentor who owns the plan can delete its slots.
    operationId: deleteSlot
    security:
      - cookieAuth: []
    parameters:
      - name: planId
        in: path
        required: true
        description: Unique identifier of the mentorship plan
        schema:
          type: integer
          example: 3
      - name: startTime
        in: query
        required: true
        description: Slot start time (ISO 8601 format)
        schema:
          type: string
          format: date-time
          example: "2025-12-01T10:00:00Z"
      - name: endTime
        in: query
        required: true
        description: Slot end time (ISO 8601 format)
        schema:
          type: string
          format: date-time
          example: "2025-12-01T11:00:00Z"
      - name: date
        in: query
        required: true
        description: Slot date (YYYY-MM-DD or ISO 8601 format)
        schema:
          type: string
          format: date
          example: "2025-12-01"
    responses:
      "200":
        description: Slot deleted successfully
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/SuccessResponse"
            example:
              success: true
              message: "Slot deleted successfully"
      "400":
        description: Invalid parameters
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "401":
        description: Unauthorized - user not logged in
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "403":
        description: Forbidden - user not authorized to delete slots for this mentor
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "404":
        description: Slot not found
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
      "500":
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: "../schemas/auth.yaml#/ErrorResponse"
